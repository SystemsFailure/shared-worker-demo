(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function d(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(e){if(e.ep)return;e.ep=!0;const o=d(e);fetch(e.href,o)}})();const u="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20aria-hidden='true'%20role='img'%20class='iconify%20iconify--logos'%20width='32'%20height='32'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20256%20256'%3e%3cpath%20fill='%23007ACC'%20d='M0%20128v128h256V0H0z'%3e%3c/path%3e%3cpath%20fill='%23FFF'%20d='m56.612%20128.85l-.081%2010.483h33.32v94.68h23.568v-94.68h33.321v-10.28c0-5.69-.122-10.444-.284-10.566c-.122-.162-20.4-.244-44.983-.203l-44.74.122l-.121%2010.443Zm149.955-10.742c6.501%201.625%2011.459%204.51%2016.01%209.224c2.357%202.52%205.851%207.111%206.136%208.208c.08.325-11.053%207.802-17.798%2011.988c-.244.162-1.22-.894-2.317-2.52c-3.291-4.795-6.745-6.867-12.028-7.233c-7.76-.528-12.759%203.535-12.718%2010.321c0%201.992.284%203.17%201.097%204.795c1.707%203.536%204.876%205.649%2014.832%209.956c18.326%207.883%2026.168%2013.084%2031.045%2020.48c5.445%208.249%206.664%2021.415%202.966%2031.208c-4.063%2010.646-14.14%2017.879-28.323%2020.276c-4.388.772-14.79.65-19.504-.203c-10.28-1.828-20.033-6.908-26.047-13.572c-2.357-2.6-6.949-9.387-6.664-9.874c.122-.163%201.178-.813%202.356-1.504c1.138-.65%205.446-3.129%209.509-5.485l7.355-4.267l1.544%202.276c2.154%203.29%206.867%207.801%209.712%209.305c8.167%204.307%2019.383%203.698%2024.909-1.26c2.357-2.153%203.332-4.388%203.332-7.68c0-2.966-.366-4.266-1.91-6.501c-1.99-2.845-6.054-5.242-17.595-10.24c-13.206-5.69-18.895-9.224-24.096-14.832c-3.007-3.25-5.852-8.452-7.03-12.8c-.975-3.617-1.22-12.678-.447-16.335c2.723-12.76%2012.353-21.659%2026.25-24.3c4.51-.853%2014.994-.528%2019.424.569Z'%3e%3c/path%3e%3c/svg%3e",f="/shared-worker-demo/vite.svg";document.querySelector("#app").innerHTML=`
	<div>
		<img src="${f}" class="logo" alt="Vite logo" />
		<img src="${u}" class="logo vanilla" alt="TypeScript logo" />

		<h1>Vite + TypeScript</h1>

		<div class="card">
			<button id="openAllTabsModal" type="button">–û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É –≤–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–∫–∞—Ö</button>
		</div>

		<div id="modalOverlay" class="modal-overlay" aria-hidden="true">
			<div class="modal">
				<h2>Shared modal</h2>
				<p>–≠—Ç–æ –º–æ–¥–∞–ª–∫–∞, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —á–µ—Ä–µ–∑ SharedWorker.</p>
				<div class="card">
					<button id="closeAllTabsModal" type="button">–ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É –≤–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–∫–∞—Ö</button>
				</div>
			</div>
		</div>
	</div>
`;let c;(function(){c=new SharedWorker("shared-worker.js").port,c.start();const d=document.getElementById("log"),l=document.getElementById("form"),e=document.getElementById("input"),o=document.getElementById("openAllTabsModal"),i=document.getElementById("closeAllTabsModal"),n=document.getElementById("modalOverlay");function s(r){if(d){const t=document.createElement("li");t.textContent=r,d.appendChild(t)}else console.log(r)}c.onmessage=r=>{const t=r.data;switch(t?.type){case"hello":s(`üßµ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ. –í–∞—à clientId: ${t.clientId}. –ö–ª–∏–µ–Ω—Ç–æ–≤: ${t.count}`);break;case"system":s(t.text);break;case"chat":s(`üí¨ [${t.from}]: ${t.text}`);break;case"modal-open":n&&n.setAttribute("aria-hidden","false"),s("üîî modal-open");break;case"modal-close":n&&n.setAttribute("aria-hidden","true"),s("üîï modal-close");break;case"echo":s(`‚Ü©Ô∏è echo: ${JSON.stringify(t.received)}`);break;default:s(`(unknown) ${JSON.stringify(t)}`)}},c.onmessageerror=()=>s("‚ö†Ô∏è messageerror"),l&&e&&l.addEventListener("submit",r=>{r.preventDefault();const t=e,m=t.value.trim();m&&(c.postMessage({type:"chat",text:m}),s(`üèñÔ∏è [ME]: ${m}`),t.value="",t.focus())}),o&&o.addEventListener("click",()=>{c.postMessage({type:"modal-open"})}),i&&i.addEventListener("click",()=>{c.postMessage({type:"modal-close"})}),n&&n.addEventListener("click",r=>{r.target===n&&c.postMessage({type:"modal-close"})}),window.addEventListener("beforeunload",()=>{try{c.postMessage({type:"disconnect"}),c.close()}catch{}})})();
